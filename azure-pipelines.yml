# Node.js with Vue (Self-Hosted)

trigger:
- main

pool:
  name: SelfHosted

steps:
# 1Ô∏è‚É£ Instalar Node
- task: NodeTool@0
  inputs:
    versionSpec: '20.x'
  displayName: 'Install Node.js'

# 2Ô∏è‚É£ Build Vue
- script: |
    cd frontend
    npm install
    npm run build
  displayName: 'Build Vue.js'

# 3Ô∏è‚É£ Deploy a Azure App Service üöÄ
- task: AzureWebApp@1
  displayName: 'Deploy Vue to Azure App Service'
  inputs:
    azureSubscription: 'AzureServiceConnection'
    appType: 'webApp'
    appName: 'AplicionPrueba'
    package: 'frontend/dist'

# 4Ô∏è‚É£ Info del agente (opcional)
- script: |
    echo Agent Name: $(Agent.Name)
    echo Agent OS: $(Agent.OS)
  displayName: 'Agent info'
- task: AzureRmWebAppDeployment@5
  inputs:
    ConnectionType: 'AzureRM'
    azureSubscription: 'AzureServiceConnection'
    appType: 'webApp'
    WebAppName: 'AplicionPrueba'
    packageForLinux: '$(System.DefaultWorkingDirectory)/**/*.zip'